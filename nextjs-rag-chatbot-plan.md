# üìã ‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡∏û‡∏±‡∏í‡∏ô‡∏≤ Next.js 16 AI Chatbot with RAG

## üéØ ‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå

‡∏™‡∏£‡πâ‡∏≤‡∏á Web Chatbot ‡∏î‡πâ‡∏ß‡∏¢ Next.js 16 ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏´‡∏•‡∏±‡∏Å‡∏Å‡∏≤‡∏£ **RAG (Retrieval-Augmented Generation)** ‡πÇ‡∏î‡∏¢:
- **Knowledge Base**: ‡πÉ‡∏ä‡πâ‡πÑ‡∏ü‡∏•‡πå `shopee-products-knowledge-base.json` (‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏¢‡∏≠‡∏î‡∏ô‡∏¥‡∏¢‡∏°‡∏à‡∏≤‡∏Å Shopee 100 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£, 15 ‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà)
- **Embedding**: ‡πÉ‡∏ä‡πâ `@huggingface/transformers` ‡∏™‡∏£‡πâ‡∏≤‡∏á vector ‡∏à‡∏≤‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (‡∏ä‡∏∑‡πà‡∏≠ + ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î + specs + tags)
- **Generation**: ‡πÉ‡∏ä‡πâ `@google/generative-ai` (Gemini) ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ / ‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö / ‡∏ï‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°
- **Matching**: ‡πÉ‡∏ä‡πâ `ml-distance` ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì cosine similarity ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°
- **Cache**: ‡πÉ‡∏ä‡πâ `idb` (IndexedDB) ‡πÄ‡∏Å‡πá‡∏ö embedding cache ‡∏ù‡∏±‡πà‡∏á client

### ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ó‡∏µ‡πà Chatbot ‡∏ï‡∏≠‡∏ö‡πÑ‡∏î‡πâ

| ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏° | ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á |
|------------|---------|
| ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ | "‡∏°‡∏µ‡∏´‡∏π‡∏ü‡∏±‡∏á‡∏ö‡∏•‡∏π‡∏ó‡∏π‡∏ò‡∏ï‡∏±‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏£‡∏ö‡∏Å‡∏ß‡∏ô‡∏£‡∏∏‡πà‡∏ô‡πÑ‡∏´‡∏ô‡∏î‡∏µ?" |
| ‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö | "iPhone 16 Pro Max ‡∏Å‡∏±‡∏ö Samsung S25 Ultra ‡∏ï‡πà‡∏≤‡∏á‡∏Å‡∏±‡∏ô‡∏¢‡∏±‡∏á‡πÑ‡∏á?" |
| ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏ï‡∏≤‡∏°‡∏á‡∏ö | "‡∏°‡∏µ‡πÇ‡∏ô‡πâ‡∏ï‡∏ö‡∏∏‡πä‡∏Ñ‡πÄ‡∏Å‡∏°‡∏°‡∏¥‡πà‡∏á‡∏á‡∏ö 30,000 ‡πÑ‡∏´‡∏°?" |
| ‡∏ñ‡∏≤‡∏°‡∏™‡πÄ‡∏õ‡∏Ñ | "MacBook Air M4 RAM ‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏£ ‡πÅ‡∏ö‡∏ï‡∏≠‡∏¢‡∏π‡πà‡∏Å‡∏µ‡πà‡∏ä‡∏°.?" |
| ‡∏ñ‡∏≤‡∏°‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡∏ô | "‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏≠‡∏∞‡πÑ‡∏£‡∏•‡∏î‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏Å‡∏¥‡∏ô 30%?" |
| ‡∏ñ‡∏≤‡∏°‡∏£‡∏µ‡∏ß‡∏¥‡∏ß/‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢ | "‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏≠‡∏∞‡πÑ‡∏£‡∏Ç‡∏≤‡∏¢‡∏î‡∏µ‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î?" |
| ‡∏ñ‡∏≤‡∏°‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô | "‡πÅ‡∏≠‡∏£‡πå Daikin ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏Å‡∏µ‡πà‡∏õ‡∏µ?" |
| ‡∏ñ‡∏≤‡∏°‡∏ï‡∏≤‡∏°‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà | "‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ beauty ‡∏£‡∏≤‡∏Ñ‡∏≤‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 1000 ‡∏ö‡∏≤‡∏ó" |

---

## üß† ‡∏´‡∏•‡∏±‡∏Å‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á RAG ‡πÉ‡∏ô‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå‡∏ô‡∏µ‡πâ

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                        RAG Pipeline Overview                        ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                     ‚îÇ
‚îÇ  [User Question]                                                    ‚îÇ
‚îÇ       ‚îÇ                                                             ‚îÇ
‚îÇ       ‚ñº                                                             ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                                               ‚îÇ
‚îÇ  ‚îÇ 1. EMBED QUERY   ‚îÇ  ‚Üê HuggingFace Transformers                  ‚îÇ
‚îÇ  ‚îÇ    (VectorÂåñ)     ‚îÇ    (all-MiniLM-L6-v2 ‡∏´‡∏£‡∏∑‡∏≠ multilingual)      ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                               ‚îÇ
‚îÇ         ‚îÇ query vector                                              ‚îÇ
‚îÇ         ‚ñº                                                           ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                    ‚îÇ
‚îÇ  ‚îÇ 2. RETRIEVE      ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ‚îÇ JSON Knowledge Base ‚îÇ                    ‚îÇ
‚îÇ  ‚îÇ    (‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤)       ‚îÇ    ‚îÇ (pre-embedded)      ‚îÇ                    ‚îÇ
‚îÇ  ‚îÇ  Cosine Similarity‚îÇ    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                    ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                               ‚îÇ
‚îÇ         ‚îÇ top-K relevant chunks                                     ‚îÇ
‚îÇ         ‚ñº                                                           ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                                               ‚îÇ
‚îÇ  ‚îÇ 3. AUGMENT       ‚îÇ  ‚Üê ‡∏™‡∏£‡πâ‡∏≤‡∏á prompt + context                    ‚îÇ
‚îÇ  ‚îÇ    (‡πÄ‡∏™‡∏£‡∏¥‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•)  ‚îÇ    ‡∏£‡∏ß‡∏° relevant chunks ‡πÄ‡∏Ç‡πâ‡∏≤‡∏Å‡∏±‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°           ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                               ‚îÇ
‚îÇ         ‚îÇ augmented prompt                                          ‚îÇ
‚îÇ         ‚ñº                                                           ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                                               ‚îÇ
‚îÇ  ‚îÇ 4. GENERATE      ‚îÇ  ‚Üê Google Gemini API                         ‚îÇ
‚îÇ  ‚îÇ    (‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö)   ‚îÇ    ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏à‡∏≤‡∏Å context + ‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°             ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                               ‚îÇ
‚îÇ         ‚îÇ                                                           ‚îÇ
‚îÇ         ‚ñº                                                           ‚îÇ
‚îÇ  [AI Response + Source References]                                  ‚îÇ
‚îÇ                                                                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üìÅ ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå

```
nextjs-ai-chat-rag-database/
‚îú‚îÄ‚îÄ package.json
‚îú‚îÄ‚îÄ next.config.ts
‚îú‚îÄ‚îÄ tsconfig.json
‚îú‚îÄ‚îÄ tailwind.config.ts
‚îú‚îÄ‚îÄ postcss.config.mjs
‚îú‚îÄ‚îÄ .env.local                          # API Keys
‚îÇ
‚îú‚îÄ‚îÄ public/
‚îÇ   ‚îî‚îÄ‚îÄ data/
‚îÇ       ‚îú‚îÄ‚îÄ shopee-products-knowledge-base.json  # ‚òÖ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ Shopee 100 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£
‚îÇ       ‚îú‚îÄ‚îÄ embeddings-cache.json       # Pre-computed embeddings (auto-generated)
‚îÇ       ‚îî‚îÄ‚îÄ metadata.json               # ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• metadata ‡∏Ç‡∏≠‡∏á knowledge base
‚îÇ
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ layout.tsx                  # Root layout + fonts + metadata
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ page.tsx                    # ‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å (redirect ‡∏´‡∏£‡∏∑‡∏≠ landing)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ globals.css                 # Tailwind + custom styles
‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ chat/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx               # ‡∏´‡∏ô‡πâ‡∏≤ Chat ‡∏´‡∏•‡∏±‡∏Å
‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ api/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ chat/
‚îÇ   ‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ route.ts           # API: ‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏° ‚Üí RAG ‚Üí ‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ embed/
‚îÇ   ‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ route.ts           # API: ‡∏™‡∏£‡πâ‡∏≤‡∏á embedding ‡∏à‡∏≤‡∏Å‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ knowledge/
‚îÇ   ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ route.ts           # API: CRUD knowledge base
‚îÇ   ‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ upload/
‚îÇ   ‚îÇ       ‚îÇ       ‚îî‚îÄ‚îÄ route.ts       # API: Upload JSON file
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ health/
‚îÇ   ‚îÇ           ‚îî‚îÄ‚îÄ route.ts           # API: Health check + model status
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ chat/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ChatContainer.tsx      # Container ‡∏´‡∏•‡∏±‡∏Å‡∏Ç‡∏≠‡∏á chat
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ChatInput.tsx          # ‡∏ä‡πà‡∏≠‡∏á input + ‡∏õ‡∏∏‡πà‡∏°‡∏™‡πà‡∏á
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ChatMessage.tsx        # ‡πÅ‡∏™‡∏î‡∏á message (user/bot)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ChatBubble.tsx         # Bubble style ‡∏Ç‡∏≠‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞ message
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ TypingIndicator.tsx    # Animation ‡∏Ç‡∏ì‡∏∞ AI ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏≠‡∏ö
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ SourceReference.tsx    # ‡πÅ‡∏™‡∏î‡∏á source ‡∏ó‡∏µ‡πà AI ‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ SuggestedQuestions.tsx # ‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥
‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ knowledge/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ KnowledgeManager.tsx   # UI ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ knowledge base
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ JsonUploader.tsx       # Drag & drop upload JSON
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ DataPreview.tsx        # Preview ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô JSON
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ EmbeddingStatus.tsx    # ‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á embedding
‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ui/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Button.tsx             # Reusable button (cva)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Card.tsx               # Card component
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Badge.tsx              # Badge/Tag
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ScrollArea.tsx         # Custom scroll area
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Skeleton.tsx           # Loading skeleton
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Toast.tsx              # Notification toast
‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ layout/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ Header.tsx             # Header + navigation
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ Sidebar.tsx            # Sidebar (chat history / knowledge)
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ ThreeBackground.tsx    # 3D background ‡∏î‡πâ‡∏ß‡∏¢ Three.js/OGL
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ lib/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ rag/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ embedding.ts           # ‚òÖ HuggingFace embedding engine
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ retriever.ts           # ‚òÖ Cosine similarity search
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ generator.ts           # ‚òÖ Gemini generation
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ pipeline.ts            # ‚òÖ RAG orchestrator (‡∏£‡∏ß‡∏°‡∏ó‡∏∏‡∏Å‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ chunker.ts             # ‡πÅ‡∏ö‡πà‡∏á document ‡πÄ‡∏õ‡πá‡∏ô chunks
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ prompt-template.ts     # Prompt templates ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Gemini
‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ knowledge/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ json-loader.ts         # ‡πÇ‡∏´‡∏•‡∏î + validate JSON files
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ knowledge-store.ts     # ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ knowledge base ‡πÉ‡∏ô memory
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ schema-validator.ts    # Validate JSON schema ‡∏î‡πâ‡∏ß‡∏¢ Zod
‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ db/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ indexed-db.ts          # IndexedDB wrapper ‡∏î‡πâ‡∏ß‡∏¢ idb
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ embedding-cache.ts     # Cache embeddings ‡πÉ‡∏ô IndexedDB
‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ utils/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ cn.ts                  # clsx + tailwind-merge helper
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ format.ts             # Format utilities
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ constants.ts           # ‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏á‡∏ó‡∏µ‡πà‡∏ï‡πà‡∏≤‡∏á‡πÜ
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ hooks/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ useChat.ts                 # Hook ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ chat state + API calls
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ useRAG.ts                  # Hook ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ RAG pipeline
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ useKnowledge.ts            # Hook ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ knowledge base
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ useEmbedding.ts            # Hook ‡∏™‡∏£‡πâ‡∏≤‡∏á/cache embeddings
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ useScrollToBottom.ts       # Auto scroll chat ‡∏•‡∏á‡∏•‡πà‡∏≤‡∏á
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ types/
‚îÇ       ‚îú‚îÄ‚îÄ chat.ts                    # Types: Message, ChatState, etc.
‚îÇ       ‚îú‚îÄ‚îÄ knowledge.ts               # Types: Document, Chunk, Embedding
‚îÇ       ‚îî‚îÄ‚îÄ rag.ts                     # Types: RAGResult, RetrievalResult
‚îÇ
‚îî‚îÄ‚îÄ docs/
    ‚îî‚îÄ‚îÄ PLAN.md                        # ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏ô‡∏µ‡πâ
```

---

## üì¶ ‡∏ö‡∏ó‡∏ö‡∏≤‡∏ó‡∏Ç‡∏≠‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞ Library

| Library | ‡∏ö‡∏ó‡∏ö‡∏≤‡∏ó | ‡πÉ‡∏ä‡πâ‡∏ó‡∏µ‡πà‡πÑ‡∏´‡∏ô |
|---------|--------|----------|
| `@huggingface/transformers` | ‡∏£‡∏±‡∏ô embedding model ‡∏ù‡∏±‡πà‡∏á server (Node.js) ‡πÅ‡∏õ‡∏•‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô vector | `lib/rag/embedding.ts` |
| `@google/generative-ai` | ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å Gemini API ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏à‡∏≤‡∏Å context + ‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏° | `lib/rag/generator.ts` |
| `ml-distance` | ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì Cosine Similarity ‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á vectors ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏´‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡πÉ‡∏Å‡∏•‡πâ‡πÄ‡∏Ñ‡∏µ‡∏¢‡∏á | `lib/rag/retriever.ts` |
| `idb` | IndexedDB wrapper ‡πÄ‡∏Å‡πá‡∏ö embedding cache ‡∏ù‡∏±‡πà‡∏á client | `lib/db/indexed-db.ts` |
| `zod` | Validate schema ‡∏Ç‡∏≠‡∏á JSON knowledge base ‡πÅ‡∏•‡∏∞ API input/output | `lib/knowledge/schema-validator.ts` |
| `react-dropzone` | Drag & drop upload ‡πÑ‡∏ü‡∏•‡πå JSON ‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡∏∞‡∏ö‡∏ö | `components/knowledge/JsonUploader.tsx` |
| `react-pdf` | ‡πÅ‡∏™‡∏î‡∏á preview PDF (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ PDF ‡πÉ‡∏ô knowledge) | `components/knowledge/DataPreview.tsx` |
| `framer-motion` / `motion` | Animation ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö chat messages, transitions, typing indicator | `components/chat/*` |
| `lucide-react` | Icons ‡∏ó‡∏±‡πà‡∏ß‡∏ó‡∏±‡πâ‡∏á UI | ‡∏ó‡∏∏‡∏Å component |
| `class-variance-authority` | ‡∏™‡∏£‡πâ‡∏≤‡∏á variant-based component styles | `components/ui/*` |
| `clsx` + `tailwind-merge` | ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ conditional className | `lib/utils/cn.ts` |
| `three` / `ogl` | 3D background effect ‡∏´‡∏£‡∏∑‡∏≠ visual elements | `components/layout/ThreeBackground.tsx` |
| `rough-notation` | Highlight/annotate ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏µ‡πà AI ‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á | `components/chat/SourceReference.tsx` |

---

## üîÑ Detailed Workflow ‚Äî ‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£

### Phase A: ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏° Knowledge Base (‡∏ó‡∏≥‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß / ‡πÄ‡∏°‡∏∑‡πà‡∏≠ update)

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ 1. Upload    ‚îÇ ‚îÄ‚îÄ‚ñ∫ ‚îÇ 2. Validate  ‚îÇ ‚îÄ‚îÄ‚ñ∫ ‚îÇ 3. Chunk     ‚îÇ ‚îÄ‚îÄ‚ñ∫ ‚îÇ 4. Embed     ‚îÇ
‚îÇ JSON File    ‚îÇ     ‚îÇ Schema (Zod) ‚îÇ     ‚îÇ ‡πÅ‡∏ö‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•    ‚îÇ     ‚îÇ ‡∏™‡∏£‡πâ‡∏≤‡∏á Vector ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                                                      ‚îÇ
                                                                      ‚ñº
                                                               ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                                                               ‚îÇ 5. Store     ‚îÇ
                                                               ‚îÇ ‡πÄ‡∏Å‡πá‡∏ö vectors ‚îÇ
                                                               ‚îÇ + chunks     ‚îÇ
                                                               ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

#### A1: ‡πÇ‡∏´‡∏•‡∏î Shopee Products JSON
- ‡πÇ‡∏´‡∏•‡∏î‡∏à‡∏≤‡∏Å `public/data/shopee-products-knowledge-base.json` ‡∏ï‡∏≠‡∏ô server start
- ‡∏´‡∏£‡∏∑‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ upload ‡πÑ‡∏ü‡∏•‡πå JSON ‡πÉ‡∏´‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô `JsonUploader.tsx` (react-dropzone)
- ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö JSON format ‡∏ï‡∏≤‡∏° schema ‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô

#### A2: Validate ‡∏î‡πâ‡∏ß‡∏¢ Zod
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö schema: ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ `products` array, ‡πÅ‡∏ï‡πà‡∏•‡∏∞ product ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ `id`, `name`, `description`, `price`
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö type: `price` ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô number, `tags` ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô string array
- ‡πÅ‡∏à‡πâ‡∏á error ‡∏ñ‡πâ‡∏≤ format ‡∏ú‡∏¥‡∏î ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏ö‡∏≠‡∏Å‡∏ß‡πà‡∏≤‡∏ú‡∏¥‡∏î‡∏ï‡∏£‡∏á‡πÑ‡∏´‡∏ô

#### A3: Chunking ‚Äî ‡∏£‡∏ß‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô Text Chunk
- **‡πÉ‡∏ä‡πâ 1 chunk ‡∏ï‡πà‡∏≠ 1 ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤** (‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏ö‡πà‡∏á‡∏¢‡πà‡∏≠‡∏¢ ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 300 tokens)
- ‡∏£‡∏ß‡∏° fields: `name` + `description` + `category` + `brand` + `tags` + `specs` + `price` + `rating`
- ‡πÄ‡∏Å‡πá‡∏ö metadata ‡∏Ç‡∏≠‡∏á chunk: `productId`, `category`, `brand`, `price`, `rating`, `soldCount`
- Metadata ‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö **post-filter** ‡∏´‡∏•‡∏±‡∏á semantic search (‡πÄ‡∏ä‡πà‡∏ô ‡∏Å‡∏£‡∏≠‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤, ‡∏Å‡∏£‡∏≠‡∏á‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà)

#### A4: Embedding ‚Äî ‡∏™‡∏£‡πâ‡∏≤‡∏á Vector
- ‡πÉ‡∏ä‡πâ `@huggingface/transformers` ‡πÇ‡∏´‡∏•‡∏î model:
  - ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥: `Xenova/all-MiniLM-L6-v2` (‡πÄ‡∏£‡πá‡∏ß, 384 dimensions)
  - ‡∏ó‡∏≤‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å: `Xenova/multilingual-e5-small` (‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢)
  - ‡∏ó‡∏≤‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å: `Xenova/paraphrase-multilingual-MiniLM-L12-v2` (multilingual ‡∏î‡∏µ‡∏°‡∏≤‡∏Å)
- ‡πÅ‡∏õ‡∏•‡∏á text ‡∏Ç‡∏≠‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞ chunk ‡πÄ‡∏õ‡πá‡∏ô vector (array of numbers)
- **‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç**: ‡∏£‡∏±‡∏ô‡∏ù‡∏±‡πà‡∏á **Server (API Route)** ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô ‡πÄ‡∏û‡∏£‡∏≤‡∏∞ model ‡πÉ‡∏´‡∏ç‡πà‡πÄ‡∏Å‡∏¥‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö client

#### A5: Store ‚Äî ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
- ‡πÄ‡∏Å‡πá‡∏ö chunks + vectors ‡πÉ‡∏ô memory (server-side Map/Array)
- Optional: ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô pre-computed embeddings ‡∏•‡∏á `embeddings-cache.json`
- Optional: ‡πÉ‡∏ä‡πâ IndexedDB (idb) ‡πÄ‡∏Å‡πá‡∏ö cache ‡∏ù‡∏±‡πà‡∏á client ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö re-visit

---

### Phase B: Chat ‚Äî ‡∏ï‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ (‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡∏ñ‡∏≤‡∏°)

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ 1. User  ‚îÇ‚îÄ‚îÄ‚ñ∫‚îÇ 2. Embed ‚îÇ‚îÄ‚îÄ‚ñ∫‚îÇ 3. Search ‚îÇ‚îÄ‚îÄ‚ñ∫‚îÇ 4. Build ‚îÇ‚îÄ‚îÄ‚ñ∫‚îÇ 5. Send  ‚îÇ
‚îÇ ‡∏ñ‡∏≤‡∏°‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏° ‚îÇ   ‚îÇ ‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°    ‚îÇ   ‚îÇ Top-K     ‚îÇ   ‚îÇ Prompt   ‚îÇ   ‚îÇ to Gemini‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                                                   ‚îÇ
          ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
          ‚ñº
   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
   ‚îÇ 6. Parse ‚îÇ‚îÄ‚îÄ‚ñ∫‚îÇ 7. Show  ‚îÇ
   ‚îÇ Response ‚îÇ   ‚îÇ ‡πÉ‡∏ô Chat  ‚îÇ
   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

#### B1: User ‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°
- ‡∏û‡∏¥‡∏°‡∏û‡πå‡πÉ‡∏ô `ChatInput.tsx` ‚Üí ‡∏Å‡∏î Enter/Send
- `useChat` hook ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ state ‚Üí ‡πÄ‡∏û‡∏¥‡πà‡∏° message ‡πÉ‡∏ô chat history
- ‡πÅ‡∏™‡∏î‡∏á `TypingIndicator` ‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏£‡∏≠

#### B2: Embed ‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°
- ‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÑ‡∏õ `POST /api/embed`
- ‡πÉ‡∏ä‡πâ HuggingFace model ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏ï‡∏≠‡∏ô‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏° knowledge base
- ‡πÑ‡∏î‡πâ query vector ‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤

#### B3: Semantic Search ‚Äî ‡∏´‡∏≤ Top-K Chunks
- ‡πÉ‡∏ä‡πâ `ml-distance` ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì **Cosine Similarity** ‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á query vector ‡∏Å‡∏±‡∏ö‡∏ó‡∏∏‡∏Å chunk vectors
- ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏à‡∏≤‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î
- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å **Top-K** chunks (‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥ K = 3‚Äì5)
- ‡∏Å‡∏≥‡∏´‡∏ô‡∏î **threshold** ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≥ (‡πÄ‡∏ä‡πà‡∏ô similarity > 0.3) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏£‡∏≠‡∏á noise

#### B4: Build Augmented Prompt
- ‡∏£‡∏ß‡∏° relevant chunks ‡πÄ‡∏Ç‡πâ‡∏≤‡∏Å‡∏±‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô prompt ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß
- ‡πÉ‡∏ä‡πâ prompt template ‡∏ó‡∏µ‡πà‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡∏°‡∏≤‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Gemini
- ‡∏£‡∏ß‡∏° system instruction + context + question + output format

#### B5: ‡∏™‡πà‡∏á‡πÑ‡∏õ Gemini
- ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å `@google/generative-ai` ‡∏î‡πâ‡∏ß‡∏¢ augmented prompt
- ‡πÉ‡∏ä‡πâ model `gemini-2.0-flash` ‡∏´‡∏£‡∏∑‡∏≠ `gemini-1.5-pro`
- ‡∏Å‡∏≥‡∏´‡∏ô‡∏î generation config: temperature, maxOutputTokens, etc.
- ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö **streaming** response ‡πÄ‡∏û‡∏∑‡πà‡∏≠ UX ‡∏ó‡∏µ‡πà‡∏î‡∏µ

#### B6: Parse Response
- ‡πÅ‡∏¢‡∏Å‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö + source references
- Format ‡πÄ‡∏õ‡πá‡∏ô Markdown (‡∏ñ‡πâ‡∏≤‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô)
- ‡∏à‡∏±‡∏ö‡∏Ñ‡∏π‡πà source ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏´‡∏≤ chunk ‡πÄ‡∏î‡∏¥‡∏°‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏™‡∏î‡∏á reference

#### B7: ‡πÅ‡∏™‡∏î‡∏á‡πÉ‡∏ô Chat
- ‡πÄ‡∏û‡∏¥‡πà‡∏° AI message ‡πÉ‡∏ô chat history
- ‡πÅ‡∏™‡∏î‡∏á source references ‡∏î‡πâ‡∏ß‡∏¢ `SourceReference.tsx`
- ‡πÉ‡∏ä‡πâ `rough-notation` highlight ‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á
- Animation ‡∏î‡πâ‡∏ß‡∏¢ `framer-motion`

---

## üìÑ JSON Knowledge Base: Shopee Products Schema

### ‡πÑ‡∏ü‡∏•‡πå: `shopee-products-knowledge-base.json`

**‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•:**
- ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: **100 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£**
- ‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà: **15 ‡∏´‡∏°‡∏ß‡∏î** (home-appliances, electronics, beauty, fashion, gaming, computing, sports, food-beverage, health, smartphones, pet-supplies, baby-kids, automotive, stationery, fashion-women)
- ‡∏ä‡πà‡∏ß‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤: **‡∏ø99 ‚Äì ‡∏ø62,990** (‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢ ‡∏ø9,343)
- ‡πÅ‡∏ö‡∏£‡∏ô‡∏î‡πå: **70+ ‡πÅ‡∏ö‡∏£‡∏ô‡∏î‡πå** (Apple, Samsung, Xiaomi, Dyson, Nike, Uniqlo, ‡∏Ø‡∏•‡∏Ø)

### ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå‡∏´‡∏•‡∏±‡∏Å (Root)

```
{
  "version": "1.0",
  "name": "Shopee Popular Products Knowledge Base",
  "description": "...",
  "source": "shopee.co.th",
  "scrapedAt": "2026-02-18T10:00:00Z",
  "totalProducts": 100,
  "categories": ["automotive","baby-kids","beauty",...],
  "products": [ ... ]
}
```

### ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ï‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Product Object)

| Field | Type | ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á | ‡πÉ‡∏ä‡πâ‡πÉ‡∏ô RAG ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£ |
|-------|------|---------|-------------------|
| `id` | string | "prod-001" | Reference ID |
| `name` | string | "iPhone 16 Pro Max 256GB" | ‚òÖ Embedding (‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤) |
| `description` | string | "‡∏™‡∏°‡∏≤‡∏£‡πå‡∏ó‡πÇ‡∏ü‡∏ô Apple..." | ‚òÖ Embedding (‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏´‡∏•‡∏±‡∏Å) |
| `price` | number | 52900 | Filter / Sort / ‡∏ï‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏£‡∏≤‡∏Ñ‡∏≤ |
| `originalPrice` | number | 54900 | ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î |
| `discount` | string\|null | "-4%" | ‡∏ï‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡∏ô |
| `soldCount` | number | 12500 | ‡∏ï‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢/‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ô‡∏¥‡∏¢‡∏° |
| `rating` | number | 4.9 | ‡∏ï‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏£‡∏µ‡∏ß‡∏¥‡∏ß / Sort |
| `shopName` | string | "Apple Official Store" | ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤ |
| `shopLocation` | string | "‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û‡∏°‡∏´‡∏≤‡∏ô‡∏Ñ‡∏£" | ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏ï‡∏±‡πâ‡∏á |
| `isMall` | boolean | true | ‡∏Å‡∏£‡∏≠‡∏á Shopee Mall |
| `isPreferred` | boolean | true | ‡∏Å‡∏£‡∏≠‡∏á Preferred Seller |
| `freeShipping` | boolean | true | ‡∏ï‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏Ñ‡πà‡∏≤‡∏™‡πà‡∏á |
| `category` | string | "smartphones" | ‚òÖ ‡∏Å‡∏£‡∏≠‡∏á‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà |
| `brand` | string | "Apple" | ‚òÖ ‡∏Å‡∏£‡∏≠‡∏á‡πÅ‡∏ö‡∏£‡∏ô‡∏î‡πå |
| `tags` | string[] | ["iphone","5g","flagship"] | ‚òÖ Embedding (‡∏Ñ‡∏≥‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç) |
| `specs` | object | {screen:"6.9 ‡∏ô‡∏¥‡πâ‡∏ß",...} | ‚òÖ Embedding (‡∏™‡πÄ‡∏õ‡∏Ñ) / ‡∏ï‡∏≠‡∏ö‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö |
| `warranty` | string | "‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏®‡∏π‡∏ô‡∏¢‡πå 1 ‡∏õ‡∏µ" | ‡∏ï‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô |
| `returnPolicy` | string | "‡∏Ñ‡∏∑‡∏ô‡πÑ‡∏î‡πâ 15 ‡∏ß‡∏±‡∏ô" | ‡∏ï‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ |

> **‚òÖ** = Field ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ô‡∏≥‡πÑ‡∏õ Embed ‡πÄ‡∏õ‡πá‡∏ô Vector

### Chunking Strategy ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Shopee Products

‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ä‡∏¥‡πâ‡∏ô‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÅ‡∏õ‡∏•‡∏á‡πÄ‡∏õ‡πá‡∏ô **1 chunk** ‡πÇ‡∏î‡∏¢‡∏£‡∏ß‡∏° fields ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡πÄ‡∏Ç‡πâ‡∏≤‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏±‡∏ô:

```
Chunk text = "[{name}] {description}
‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà: {category} | ‡πÅ‡∏ö‡∏£‡∏ô‡∏î‡πå: {brand}
‡∏£‡∏≤‡∏Ñ‡∏≤: ‡∏ø{price} (‡∏•‡∏î {discount}) | ‡∏Ç‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß: {soldCount} ‡∏ä‡∏¥‡πâ‡∏ô | ‚≠ê {rating}
‡∏£‡πâ‡∏≤‡∏ô: {shopName} ({shopLocation})
‡∏™‡πÄ‡∏õ‡∏Ñ: {specs ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ô}
‡πÅ‡∏ó‡πá‡∏Å: {tags ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ô}
‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô: {warranty} | ‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤: {returnPolicy}"
```

**‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ 1 chunk ‡∏ï‡πà‡∏≠ 1 ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤:**
- ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ä‡∏¥‡πâ‡∏ô‡∏°‡∏µ‡∏Ç‡∏ô‡∏≤‡∏î‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì 150-300 tokens (‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô chunk size limit)
- ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏∏‡∏Å field ‡∏Ç‡∏≠‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏™‡∏π‡∏á ‡πÑ‡∏°‡πà‡∏Ñ‡∏ß‡∏£‡πÅ‡∏¢‡∏Å
- ‡∏ó‡∏≥‡πÉ‡∏´‡πâ retrieve ‡πÑ‡∏î‡πâ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô
- 100 ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ = 100 chunks = 100 vectors (‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÑ‡∏î‡πâ‡∏™‡∏ö‡∏≤‡∏¢‡πÉ‡∏ô memory)

---

## üîå API Routes Design

### `POST /api/chat`
| Field | ‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢ |
|-------|---------|
| **Purpose** | ‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏° ‚Üí ‡∏£‡∏±‡∏ô RAG pipeline ‚Üí ‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö |
| **Request Body** | `{ message: string, chatHistory?: Message[], options?: { topK?: number, temperature?: number } }` |
| **Response** | `{ answer: string, sources: Source[], confidence: number }` |
| **Streaming** | ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö `ReadableStream` ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö streaming response |

### `POST /api/embed`
| Field | ‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢ |
|-------|---------|
| **Purpose** | ‡∏™‡∏£‡πâ‡∏≤‡∏á embedding vector ‡∏à‡∏≤‡∏Å‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° |
| **Request Body** | `{ text: string }` ‡∏´‡∏£‡∏∑‡∏≠ `{ texts: string[] }` (batch) |
| **Response** | `{ vector: number[] }` ‡∏´‡∏£‡∏∑‡∏≠ `{ vectors: number[][] }` |

### `GET/POST /api/knowledge`
| Field | ‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢ |
|-------|---------|
| **Purpose** | ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ knowledge base (CRUD) |
| **GET** | ‡∏î‡∏∂‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ documents ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î + ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ embedding |
| **POST** | ‡πÄ‡∏û‡∏¥‡πà‡∏°/‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï documents ‚Üí trigger re-embedding |
| **DELETE** | ‡∏•‡∏ö document + ‡∏•‡∏ö embeddings ‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á |

### `POST /api/knowledge/upload`
| Field | ‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢ |
|-------|---------|
| **Purpose** | Upload ‡πÑ‡∏ü‡∏•‡πå JSON ‚Üí validate ‚Üí chunk ‚Üí embed ‚Üí store |
| **Request** | `multipart/form-data` (JSON file) |
| **Response** | `{ success: boolean, documentsCount: number, chunksCount: number }` |

### `GET /api/health`
| Field | ‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢ |
|-------|---------|
| **Purpose** | ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏£‡∏∞‡∏ö‡∏ö |
| **Response** | `{ status, embeddingModelLoaded, knowledgeBaseSize, embeddingsCount }` |

---

## üé® UI/UX Design Plan

### ‡∏´‡∏ô‡πâ‡∏≤ Chat (`/chat`)

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ Header ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ  ü§ñ AI Assistant    [Knowledge] [Settings]‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                  ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ Chat Area (ScrollArea) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ                                           ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îå‚îÄ Bot Message ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ ‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡πà‡∏∞! ‡∏ñ‡∏≤‡∏°‡∏≠‡∏∞‡πÑ‡∏£‡∏Å‡πá‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢ üòä     ‚îÇ    ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ                                           ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ           ‚îå‚îÄ User Message ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ           ‚îÇ ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏°‡∏µ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡πÑ‡∏´‡∏°?     ‚îÇ    ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ           ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ                                           ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îå‚îÄ Bot Message ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏∏‡∏Å‡∏ä‡∏¥‡πâ‡∏ô‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô 2 ‡∏õ‡∏µ  ‚îÇ    ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ ‚îÇ    ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ üìé Sources:                      ‚îÇ    ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚Ä¢ warranty-policy (95% match)   ‚îÇ    ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚Ä¢ product-manual (82% match)    ‚îÇ    ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ                                           ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îå‚îÄ Typing Indicator ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ ‚óè ‚óè ‚óè ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö...         ‚îÇ    ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ                                           ‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                  ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ Suggested Questions ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ [‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏£?] [‡∏ß‡∏¥‡∏ò‡∏µ‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠] [‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤]‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                  ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ Chat Input ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ  üí¨ ‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì...          [Send ‚û§] ‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                  ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ 3D Background (Three.js/OGL) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ  (particles / gradient mesh animation)    ‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### UI Components ‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ï‡∏±‡∏ß‡πÉ‡∏ä‡πâ‡∏≠‡∏∞‡πÑ‡∏£

| Component | Libraries | ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏ |
|-----------|-----------|---------|
| `ChatMessage` | `framer-motion` | Animate ‡πÄ‡∏Ç‡πâ‡∏≤/‡∏≠‡∏≠‡∏Å, slide-up effect |
| `TypingIndicator` | `framer-motion` | Bouncing dots animation |
| `SourceReference` | `rough-notation` | Underline / highlight ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á |
| `JsonUploader` | `react-dropzone` | Drag & drop zone ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö JSON |
| `DataPreview` | `react-pdf` | Preview PDF (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ) |
| `ThreeBackground` | `three` ‡∏´‡∏£‡∏∑‡∏≠ `ogl` | Particle effect / animated mesh |
| `Button`, `Card` | `cva`, `clsx`, `tailwind-merge` | Variant-based styled components |
| Icons ‡∏ó‡∏∏‡∏Å‡∏ó‡∏µ‡πà | `lucide-react` | Send, Bot, User, Upload, etc. |

---

## ‚öôÔ∏è Configuration & Environment Variables

### `.env.local`

| ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ | ‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢ | ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á |
|--------|---------|---------|
| `GOOGLE_GEMINI_API_KEY` | API Key ‡∏Ç‡∏≠‡∏á Google Gemini | `AIzaSy...` |
| `GEMINI_MODEL` | Gemini model ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ | `gemini-2.0-flash` |
| `EMBEDDING_MODEL` | HuggingFace model ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö embedding | `Xenova/all-MiniLM-L6-v2` |
| `TOP_K` | ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô chunks ‡∏ó‡∏µ‡πà‡∏î‡∏∂‡∏á‡∏°‡∏≤ | `5` |
| `SIMILARITY_THRESHOLD` | ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≥‡∏Ç‡∏≠‡∏á cosine similarity | `0.3` |
| `CHUNK_SIZE` | ‡∏Ç‡∏ô‡∏≤‡∏î chunk (tokens) | `300` |
| `CHUNK_OVERLAP` | overlap ‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á chunks (tokens) | `50` |
| `MAX_CONTEXT_LENGTH` | ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏ß‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î‡∏Ç‡∏≠‡∏á context ‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á‡πÑ‡∏õ Gemini | `4000` |

---

## üß© Embedding Model ‚Äî ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏•‡∏∞‡∏Ç‡πâ‡∏≠‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö

| Model | Dimensions | ‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢ | ‡∏Ç‡∏ô‡∏≤‡∏î | ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß | ‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û |
|-------|-----------|---------|------|---------|--------|
| `Xenova/all-MiniLM-L6-v2` | 384 | ‚ö†Ô∏è ‡∏û‡∏≠‡πÉ‡∏ä‡πâ | ~23MB | ‚ö° ‡πÄ‡∏£‡πá‡∏ß‡∏°‡∏≤‡∏Å | ‡∏î‡∏µ (‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©) |
| `Xenova/multilingual-e5-small` | 384 | ‚úÖ ‡∏î‡∏µ | ~118MB | ‚ö° ‡πÄ‡∏£‡πá‡∏ß | ‡∏î‡∏µ‡∏°‡∏≤‡∏Å (multilingual) |
| `Xenova/paraphrase-multilingual-MiniLM-L12-v2` | 384 | ‚úÖ ‡∏î‡∏µ‡∏°‡∏≤‡∏Å | ~118MB | ‚ö° ‡πÄ‡∏£‡πá‡∏ß | ‡∏î‡∏µ‡∏°‡∏≤‡∏Å |
| `Xenova/bge-m3` | 1024 | ‚úÖ ‡∏î‡∏µ‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏° | ~500MB | üê¢ ‡∏ä‡πâ‡∏≤ | ‡∏î‡∏µ‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏° |

> **‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥**: ‡∏ñ‡πâ‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏õ‡πá‡∏ô **‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢** ‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ `paraphrase-multilingual-MiniLM-L12-v2`
> ‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô **‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©** ‡∏•‡πâ‡∏ß‡∏ô ‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ `all-MiniLM-L6-v2` (‡πÄ‡∏ö‡∏≤‡πÅ‡∏•‡∏∞‡πÄ‡∏£‡πá‡∏ß‡∏Å‡∏ß‡πà‡∏≤)

---

## üîß Prompt Template Design ‚Äî Shopee Product Chatbot

### System Prompt ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Gemini

```
‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏õ‡πá‡∏ô AI Shopping Assistant ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏à‡∏≤‡∏Å Shopee Thailand
‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏¢‡∏≠‡∏î‡∏ô‡∏¥‡∏¢‡∏° 100 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ ‡∏à‡∏≤‡∏Å 15 ‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà

‡∏Å‡∏é:
1. ‡∏ï‡∏≠‡∏ö‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏à‡∏≤‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏ô Context ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô
2. ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏° ‡πÉ‡∏´‡πâ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÉ‡∏Å‡∏•‡πâ‡πÄ‡∏Ñ‡∏µ‡∏¢‡∏á‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î
3. ‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤ ‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î ‚≠ê ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô ‡πÅ‡∏•‡∏∞‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢ ‡πÄ‡∏™‡∏°‡∏≠
4. ‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏™‡πÄ‡∏õ‡∏Ñ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ñ‡∏π‡∏Å‡∏ñ‡∏≤‡∏°
5. ‡∏ï‡∏≠‡∏ö‡πÄ‡∏õ‡πá‡∏ô‡∏†‡∏≤‡∏©‡∏≤‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏° (‡πÑ‡∏ó‡∏¢/‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©)
6. ‡πÉ‡∏ä‡πâ emoji ‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏≠‡πà‡∏≤‡∏ô‡∏á‡πà‡∏≤‡∏¢
7. ‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á product ID ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÑ‡∏î‡πâ
```

### Augmented Prompt Format

```
[System Instruction]

## ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á (Context):

[Product: {prod_id} - {name}]
{chunk_text ‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å chunking}

[Product: {prod_id} - {name}]
{chunk_text}

...

## ‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏à‡∏≤‡∏Å‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤:
{user_question}

## ‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö (‡∏ï‡∏≠‡∏ö‡∏à‡∏≤‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡πâ‡∏≤‡∏á‡∏ï‡πâ‡∏ô‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô):
```

### ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á Augmented Prompt ‡∏à‡∏£‡∏¥‡∏á

```
‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏õ‡πá‡∏ô AI Shopping Assistant ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏à‡∏≤‡∏Å Shopee Thailand...

## ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á:

[Product: prod-006 - AirPods Pro 3 (USB-C)]
‡∏´‡∏π‡∏ü‡∏±‡∏á‡πÑ‡∏£‡πâ‡∏™‡∏≤‡∏¢ Apple AirPods Pro 3 ‡∏ä‡∏¥‡∏õ H3 ‡∏ï‡∏±‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏á ANC
‡∏£‡∏≤‡∏Ñ‡∏≤: ‡∏ø8,990 (‡∏•‡∏î -5%) | ‡∏Ç‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß: 25,600 ‡∏ä‡∏¥‡πâ‡∏ô | ‚≠ê 4.9
‡∏£‡πâ‡∏≤‡∏ô: Apple Official Store
‡∏™‡πÄ‡∏õ‡∏Ñ: chip=H3, anc=Active Noise Cancellation, battery=6 ‡∏ä‡∏°.

[Product: prod-007 - JBL Tune 770NC]
‡∏´‡∏π‡∏ü‡∏±‡∏á‡∏Ñ‡∏£‡∏≠‡∏ö‡∏´‡∏π JBL Tune 770NC ‡∏ï‡∏±‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏á Adaptive ANC
‡∏£‡∏≤‡∏Ñ‡∏≤: ‡∏ø2,990 (‡∏•‡∏î -25%) | ‡∏Ç‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß: 32,100 ‡∏ä‡∏¥‡πâ‡∏ô | ‚≠ê 4.7
‡∏£‡πâ‡∏≤‡∏ô: JBL Official Store
‡∏™‡πÄ‡∏õ‡∏Ñ: type=Over-ear, anc=Adaptive, battery=44 ‡∏ä‡∏°.

## ‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏à‡∏≤‡∏Å‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤:
‡∏´‡∏π‡∏ü‡∏±‡∏á‡∏ï‡∏±‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏£‡∏ö‡∏Å‡∏ß‡∏ô‡∏ï‡∏±‡∏ß‡πÑ‡∏´‡∏ô‡∏î‡∏µ ‡∏á‡∏ö‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 5000 ‡∏ö‡∏≤‡∏ó?

## ‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö:
```

---

## ‚ö†Ô∏è ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡πâ‡∏≤‡∏ó‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡∏ß‡∏¥‡∏ò‡∏µ‡∏£‡∏±‡∏ö‡∏°‡∏∑‡∏≠

### 1. Model Loading ‡∏ä‡πâ‡∏≤‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å
- **‡∏õ‡∏±‡∏ç‡∏´‡∏≤**: HuggingFace Transformers ‡∏ï‡πâ‡∏≠‡∏á‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î model ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å (~100MB+)
- **‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç**: ‡πÇ‡∏´‡∏•‡∏î model ‡∏ï‡∏≠‡∏ô server start (warm-up) ‚Üí ‡πÄ‡∏Å‡πá‡∏ö instance ‡πÉ‡∏ô global variable ‚Üí ‡πÉ‡∏ä‡πâ `health` API ‡πÄ‡∏ä‡πá‡∏Ñ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ ‚Üí ‡πÅ‡∏™‡∏î‡∏á loading state ‡∏ö‡∏ô UI

### 2. ‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢ Embedding Quality
- **‡∏õ‡∏±‡∏ç‡∏´‡∏≤**: ‡∏ö‡∏≤‡∏á model ‡πÑ‡∏°‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢‡∏î‡∏µ ‚Üí matching ‡πÑ‡∏°‡πà‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥
- **‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç**: ‡πÉ‡∏ä‡πâ multilingual model ‚Üí ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏£‡∏¥‡∏á ‚Üí ‡∏õ‡∏£‡∏±‡∏ö threshold ‚Üí ‡πÉ‡∏ä‡πâ hybrid search (keyword + semantic) ‡∏ñ‡πâ‡∏≤‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô

### 3. Memory Usage ‡∏ö‡∏ô Server
- **‡∏õ‡∏±‡∏ç‡∏´‡∏≤**: ‡πÄ‡∏Å‡πá‡∏ö embeddings ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÉ‡∏ô memory ‡πÉ‡∏ä‡πâ RAM ‡∏°‡∏≤‡∏Å
- **‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç**: ‡∏ñ‡πâ‡∏≤ knowledge base ‡πÄ‡∏•‡πá‡∏Å (<10,000 chunks) ‡πÄ‡∏Å‡πá‡∏ö‡πÉ‡∏ô memory ‡πÑ‡∏î‡πâ ‚Üí ‡∏ñ‡πâ‡∏≤‡πÉ‡∏´‡∏ç‡πà‡∏Å‡∏ß‡πà‡∏≤ ‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ file-based storage ‡∏´‡∏£‡∏∑‡∏≠ vector database

### 4. Hybrid Search (Semantic + Filter)
- **‡∏õ‡∏±‡∏ç‡∏´‡∏≤**: Semantic search ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡πÑ‡∏°‡πà‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏û‡∏≠‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÄ‡∏ä‡∏¥‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç ‡πÄ‡∏ä‡πà‡∏ô "‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏£‡∏≤‡∏Ñ‡∏≤‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 1000 ‡∏ö‡∏≤‡∏ó"
- **‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç**: ‡πÉ‡∏ä‡πâ **Hybrid approach** ‚Üí Semantic search ‡∏´‡∏≤ Top-K ‡∏Å‡πà‡∏≠‡∏ô ‚Üí ‡πÅ‡∏•‡πâ‡∏ß post-filter ‡∏î‡πâ‡∏ß‡∏¢ metadata (price, category, brand, rating, soldCount) ‚Üí ‡∏ñ‡πâ‡∏≤‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏°‡∏µ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç/‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô ‡πÉ‡∏´‡πâ pre-filter ‡∏Å‡πà‡∏≠‡∏ô semantic search

### 5. Hallucination ‡∏Ç‡∏≠‡∏á Gemini
- **‡∏õ‡∏±‡∏ç‡∏´‡∏≤**: AI ‡∏≠‡∏≤‡∏à‡πÅ‡∏ï‡πà‡∏á‡∏™‡πÄ‡∏õ‡∏Ñ/‡∏£‡∏≤‡∏Ñ‡∏≤/‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÉ‡∏ô knowledge base
- **‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç**: Prompt ‡πÉ‡∏´‡πâ‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô‡∏ß‡πà‡∏≤ "‡∏ï‡∏≠‡∏ö‡∏à‡∏≤‡∏Å context ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô" ‚Üí ‡∏™‡πà‡∏á product ID ‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡πÉ‡∏´‡πâ user ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö ‚Üí ‡πÅ‡∏™‡∏î‡∏á similarity score ‚Üí ‡∏ñ‡πâ‡∏≤ top match score ‡∏ï‡πà‡∏≥ (<0.3) ‡πÉ‡∏´‡πâ AI ‡∏ö‡∏≠‡∏Å‡∏ß‡πà‡∏≤ "‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏á"

### 6. Next.js 16 + HuggingFace Transformers Compatibility
- **‡∏õ‡∏±‡∏ç‡∏´‡∏≤**: Transformers.js ‡∏≠‡∏≤‡∏à‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏Å‡∏±‡∏ö Next.js bundler (ONNX runtime)
- **‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç**: ‡∏Å‡∏≥‡∏´‡∏ô‡∏î `serverExternalPackages` ‡πÉ‡∏ô `next.config.ts` ‚Üí ‡πÉ‡∏ä‡πâ `onnxruntime-node` ‡∏ù‡∏±‡πà‡∏á server ‚Üí ‡∏≠‡∏≤‡∏à‡∏ï‡πâ‡∏≠‡∏á config webpack ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö WASM files

---

## üìÖ ‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡∏û‡∏±‡∏í‡∏ô‡∏≤ (Development Phases)

| Phase | ‡∏á‡∏≤‡∏ô | ‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤ | Priority |
|-------|------|---------|----------|
| **Phase 1** | Setup ‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå + Config Next.js 16 + Tailwind 4 + Environment | 0.5 ‡∏ß‡∏±‡∏ô | üî¥ ‡∏™‡∏π‡∏á |
| **Phase 2** | ‡∏™‡∏£‡πâ‡∏≤‡∏á JSON Knowledge Base Schema + Zod Validation + Sample Data | 0.5 ‡∏ß‡∏±‡∏ô | üî¥ ‡∏™‡∏π‡∏á |
| **Phase 3** | Embedding Engine ‚Äî ‡πÇ‡∏´‡∏•‡∏î HuggingFace model + ‡∏™‡∏£‡πâ‡∏≤‡∏á vectors | 1 ‡∏ß‡∏±‡∏ô | üî¥ ‡∏™‡∏π‡∏á |
| **Phase 4** | Retriever ‚Äî Cosine Similarity Search + Top-K Selection | 0.5 ‡∏ß‡∏±‡∏ô | üî¥ ‡∏™‡∏π‡∏á |
| **Phase 5** | Generator ‚Äî Gemini Integration + Prompt Templates | 1 ‡∏ß‡∏±‡∏ô | üî¥ ‡∏™‡∏π‡∏á |
| **Phase 6** | RAG Pipeline ‚Äî ‡∏£‡∏ß‡∏° Embed ‚Üí Retrieve ‚Üí Generate ‡πÄ‡∏Ç‡πâ‡∏≤‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏±‡∏ô | 0.5 ‡∏ß‡∏±‡∏ô | üî¥ ‡∏™‡∏π‡∏á |
| **Phase 7** | API Routes ‚Äî `/api/chat`, `/api/embed`, `/api/knowledge` | 1 ‡∏ß‡∏±‡∏ô | üî¥ ‡∏™‡∏π‡∏á |
| **Phase 8** | Chat UI ‚Äî ChatContainer, Input, Messages, TypingIndicator | 1.5 ‡∏ß‡∏±‡∏ô | üî¥ ‡∏™‡∏π‡∏á |
| **Phase 9** | Knowledge Manager UI ‚Äî Upload, Preview, Status | 1 ‡∏ß‡∏±‡∏ô | üü° ‡∏Å‡∏•‡∏≤‡∏á |
| **Phase 10** | Streaming Response ‚Äî ‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡πÅ‡∏ö‡∏ö stream ‡πÑ‡∏õ UI | 0.5 ‡∏ß‡∏±‡∏ô | üü° ‡∏Å‡∏•‡∏≤‡∏á |
| **Phase 11** | IndexedDB Caching ‚Äî cache embeddings ‡∏ù‡∏±‡πà‡∏á client | 0.5 ‡∏ß‡∏±‡∏ô | üü° ‡∏Å‡∏•‡∏≤‡∏á |
| **Phase 12** | 3D Background ‚Äî Three.js / OGL particle effect | 0.5 ‡∏ß‡∏±‡∏ô | üü¢ ‡∏ï‡πà‡∏≥ |
| **Phase 13** | Source References ‚Äî rough-notation highlights | 0.5 ‡∏ß‡∏±‡∏ô | üü¢ ‡∏ï‡πà‡∏≥ |
| **Phase 14** | Testing + Performance Tuning + Edge Cases | 1.5 ‡∏ß‡∏±‡∏ô | üî¥ ‡∏™‡∏π‡∏á |
| **‡∏£‡∏ß‡∏°** | | **~11 ‡∏ß‡∏±‡∏ô** | |

---

## üß™ Testing Checklist

### Functional Tests
- [ ] Upload JSON ‚Üí validate ‚Üí chunk ‚Üí embed ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
- [ ] ‡∏ñ‡∏≤‡∏°‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡πÉ‡∏ô knowledge base ‚Üí ‡πÑ‡∏î‡πâ‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
- [ ] ‡∏ñ‡∏≤‡∏°‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÉ‡∏ô knowledge base ‚Üí AI ‡∏ï‡∏≠‡∏ö‡∏ß‡πà‡∏≤ "‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•"
- [ ] ‡∏ñ‡∏≤‡∏°‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢ ‚Üí ‡πÑ‡∏î‡πâ‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢
- [ ] ‡∏ñ‡∏≤‡∏°‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏© ‚Üí ‡πÑ‡∏î‡πâ‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©
- [ ] Source references ‡πÅ‡∏™‡∏î‡∏á‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á + ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏£‡∏¥‡∏á
- [ ] Streaming response ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ ‚Üí ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡πà‡∏≠‡∏¢‡πÜ ‡∏õ‡∏£‡∏≤‡∏Å‡∏è
- [ ] Upload JSON ‡∏ú‡∏¥‡∏î format ‚Üí ‡πÅ‡∏™‡∏î‡∏á error message

### Performance Tests
- [ ] Embedding model ‡πÇ‡∏´‡∏•‡∏î‡∏†‡∏≤‡∏¢‡πÉ‡∏ô 10 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ (warm-up)
- [ ] ‡∏ï‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏†‡∏≤‡∏¢‡πÉ‡∏ô 3‚Äì5 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ (end-to-end)
- [ ] Knowledge base 1,000 chunks ‚Üí search ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô 100ms
- [ ] ‡πÑ‡∏°‡πà‡∏°‡∏µ memory leak ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á

### UI Tests
- [ ] Responsive: Desktop (1920px), Tablet (768px), Mobile (375px)
- [ ] Chat scroll ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ message ‡πÉ‡∏´‡∏°‡πà
- [ ] Typing indicator ‡πÅ‡∏™‡∏î‡∏á/‡∏ã‡πà‡∏≠‡∏ô‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
- [ ] Animation smooth ‡πÑ‡∏°‡πà‡∏Å‡∏£‡∏∞‡∏ï‡∏∏‡∏Å
- [ ] Dark mode / Light mode (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)

---

## üìù ‡∏™‡∏£‡∏∏‡∏õ

‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå‡∏ô‡∏µ‡πâ‡∏™‡∏£‡πâ‡∏≤‡∏á **Shopee Product RAG Chatbot** ‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ö‡∏ô Next.js 16 ‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ `shopee-products-knowledge-base.json` (100 ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏¢‡∏≠‡∏î‡∏ô‡∏¥‡∏¢‡∏°, 15 ‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà, 70+ ‡πÅ‡∏ö‡∏£‡∏ô‡∏î‡πå) ‡πÄ‡∏õ‡πá‡∏ô knowledge base, HuggingFace Transformers ‡∏™‡∏£‡πâ‡∏≤‡∏á embeddings ‡∏ù‡∏±‡πà‡∏á server (‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥ multilingual model ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢), ml-distance ‡∏ó‡∏≥ semantic search ‡∏î‡πâ‡∏ß‡∏¢ cosine similarity, ‡πÅ‡∏•‡∏∞ Google Gemini ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤/‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö/‡∏ï‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°

**‡∏à‡∏∏‡∏î‡πÄ‡∏î‡πà‡∏ô:**
- ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏û‡∏∂‡πà‡∏á vector database ‡∏†‡∏≤‡∏¢‡∏ô‡∏≠‡∏Å (‡πÄ‡∏Å‡πá‡∏ö 100 vectors ‡πÉ‡∏ô memory ‡πÑ‡∏î‡πâ‡∏™‡∏ö‡∏≤‡∏¢)
- ‡πÉ‡∏ä‡πâ 1 chunk ‡∏ï‡πà‡∏≠ 1 ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏£‡∏ö‡πÉ‡∏ô‡∏Å‡πâ‡∏≠‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß ‡πÑ‡∏°‡πà‡∏´‡∏≤‡∏¢‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á chunk)
- Hybrid approach: Semantic search + price/category filter ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÄ‡∏ä‡∏¥‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç
- ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢‡πÅ‡∏•‡∏∞‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©
- Streaming response ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö UX ‡∏ó‡∏µ‡πà‡∏î‡∏µ
